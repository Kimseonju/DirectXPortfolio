
#include "TestParticle.h"
#include "Scene/Scene.h"
#include "Resource/Material.h"

CTestParticle::CTestParticle() :
	m_ChildFire(false),
	m_ChildFireTime(0.f),
	m_ChildFireTimeMax(0.2f),
	m_ChildFireDurationTime(0.f),
	m_ChildFireDurationTimeMax(5.f)
{
}

CTestParticle::CTestParticle(const CTestParticle& obj) :
	CGameObject(obj)
{
	m_Particle = (CParticleSystemComponent*)FindSceneComponent("Particle");
}

CTestParticle::~CTestParticle()
{
}

void CTestParticle::Start()
{
	CGameObject::Start();
}

bool CTestParticle::Init()
{
	CGameObject::Init();

	m_Sprite = CreateSceneComponent<CSpriteComponent>("Sprite");
	m_Particle = CreateSceneComponent<CParticleSystemComponent>("Particle");

	m_Particle->SetParticle("TestParticle");

	m_Particle->SetPivot(0.5f, 0.5f, 0.f);

	SetRootComponent(m_Sprite);

	m_Sprite->AddChild(m_Particle);
	m_Sprite->SetRelativePos(Vector3(150.f, 75.f, 0.f));
	m_Sprite->SetWorldScale(50, 50, 0);
	m_Sprite->SetPivot(0.5f, 0.5f, 0.f);
	m_Particle->SetSpawnTime(0.1f);

	//CSharedPtr<CMaterial>   SpriteMtrl = m_Sprite->GetMaterial(0);

	//SpriteMtrl->AddTexture("PlayerTex", TEXT("teemo.png"));

	return true;
}

void CTestParticle::Update(float DeltaTime)
{
	CGameObject::Update(DeltaTime);
}

void CTestParticle::PostUpdate(float DeltaTime)
{
	CGameObject::PostUpdate(DeltaTime);
}

void CTestParticle::Collision(float DeltaTime)
{
	CGameObject::Collision(DeltaTime);
}

void CTestParticle::Render(float DeltaTime)
{
	CGameObject::Render(DeltaTime);
}

CTestParticle* CTestParticle::Clone()
{
	return new CTestParticle(*this);
}

void CTestParticle::Animation2DNotify(const std::string& Name)
{
}
